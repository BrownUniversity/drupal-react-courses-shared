{"version":3,"file":"drupal-react-courses-shared.esm.js","sources":["../src/components/Loader.tsx","../src/components/Wrapper.tsx","../src/components/CourseField.tsx","../src/components/Filter.tsx","../src/components/FilterWrapper.tsx","../src/components/MeetingDetails.tsx","../src/contexts/SelectedSectionContext.tsx","../src/constants.ts","../src/queries.ts","../src/test_utils/makeMeeting.ts","../src/test_utils/makeMeetings.ts","../src/test_utils/renderWithRouter.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport { Loader as BrownLoader } from \"brown-university-components\";\nimport { colors } from \"brown-university-styles\";\n\nconst Loader = styled(BrownLoader)`\n  text-align: center;\n\n  #cover {\n    stroke: ${colors.white};\n  }\n`;\n\nexport default Loader;\n","import styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  animation: 750ms ease fadeInUp;\n\n  @keyframes fadeInUp {\n    0% {\n      opacity: 0;\n      transform: translateY(0.75rem);\n    }\n    100% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n\nexport default Wrapper;\n","import React from \"react\";\n\ntype CourseFieldProps = {\n  label?: string;\n  href?: string;\n  value?: string;\n  defaultValue?: string;\n};\n\nconst CourseField = ({\n  label,\n  href,\n  value,\n  defaultValue = \"\"\n}: CourseFieldProps) => (\n  <div className=\"course_item_row\">\n    {label && <span className=\"course_item_row_label\">{label}: </span>}\n    <span className=\"course_item_row_content\">\n      {href && value ? (\n        <a\n          href={href}\n          className=\"course_item_row_content\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {value}\n        </a>\n      ) : (\n        value || defaultValue\n      )}\n    </span>\n  </div>\n);\n\nexport default CourseField;\n","import React, { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { ChevronDownSVG } from \"brown-university-components\";\n\nconst Filter = ({ data }: { data: Record<string, string> }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const renderFilter = (label: string, code: string) => (\n    <li className=\"sub_nav_item\" key={label}>\n      <NavLink\n        exact\n        to={`/${code}`}\n        className=\"sub_nav_link sub_nav_link_label\"\n        data-testid={`${code}-filter`}\n        activeStyle={{ color: \"#C00404\" }}\n      >\n        {label}\n      </NavLink>\n    </li>\n  );\n\n  return (\n    <nav\n      className=\"sub_nav\"\n      aria-label=\"Courses\"\n      itemType=\"http://schema.org/SiteNavigationElement\"\n    >\n      <div className=\"sub_nav_header\">\n        <h2 className=\"sub_nav_title\">Courses</h2>\n        <button\n          className={`sub_nav_handle ${isExpanded ? \"fs-swap-active\" : \"\"}`}\n          type=\"button\"\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          <span className=\"sub_nav_handle_icon\">\n            <svg className=\"icon icon_chevron_down\">\n              <ChevronDownSVG />\n            </svg>\n          </span>\n          <span className=\"sub_nav_handle_label\">\n            {isExpanded ? \"Close\" : \"In This Section\"}\n          </span>\n        </button>\n      </div>\n      <ul\n        className={`sub_nav_list ${isExpanded ? \"fs-swap-active\" : \"\"}`}\n        aria-label=\"Courses\"\n        aria-hidden=\"false\"\n      >\n        {renderFilter(\"All Courses\", \"\")}\n        {Object.entries(data).map(([code, description]) =>\n          renderFilter(description, code)\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Filter;\n","import ReactDOM from \"react-dom\";\nimport { ReactNode } from \"react\";\n\nconst FilterWrapper = ({ children }: { children: ReactNode }) =>\n  process.env.NODE_ENV !== \"production\"\n    ? children\n    : ReactDOM.createPortal(\n        children,\n        document.getElementsByClassName(\"page_sub_nav\")[0]\n      );\n\nexport default FilterWrapper;\n","import React from \"react\";\nimport moment from \"moment\";\nimport CourseField from \"./CourseField\";\n\nconst formatDate = (date: string) =>\n  moment(date, \"YYYY-MM-DD\").format(\"MMM D, YYYY\");\n\ntype Meeting = {\n  buildingDescription?: string;\n  roomCode?: string;\n  startTime?: string;\n  endTime?: string;\n  daysToMeet?: string;\n  startDate?: string;\n  endDate?: string;\n};\n\nconst formatMeeting = (meeting: Meeting) => {\n  const {\n    buildingDescription,\n    roomCode,\n    startTime,\n    endTime,\n    daysToMeet,\n    startDate,\n    endDate\n  } = meeting;\n\n  const weekdays: Record<string, string> = {\n    U: \"Sun\",\n    M: \"Mon\",\n    T: \"Tue\",\n    W: \"Wed\",\n    R: \"Thu\",\n    F: \"Fri\",\n    S: \"Sat\"\n  };\n\n  const location = `${buildingDescription || \"\"} ${roomCode || \"\"}`;\n  const times = startTime && endTime ? `${startTime} - ${endTime}` : \"\";\n\n  const days = daysToMeet\n    ? daysToMeet\n        .split(\"\")\n        .map(day => weekdays[day])\n        .join(\", \")\n    : \"\";\n\n  const dates =\n    startDate && endDate\n      ? `from ${formatDate(startDate)} to ${formatDate(endDate)}`\n      : \"\";\n\n  return `${location} ${times} ${days} - ${dates}`;\n};\n\nconst MeetingDetails = ({ meetings }: { meetings: Meeting[] }) =>\n  meetings.length > 0 ? (\n    <>\n      {meetings.map((m, i) => (\n        <CourseField\n          label={i === 0 ? \"Meetings\" : undefined}\n          key={`${m.startDate}-${m.daysToMeet}-${m.startTime}`}\n          value={formatMeeting(m)}\n        />\n      ))}\n    </>\n  ) : (\n    <CourseField label=\"Meetings\" value=\"Meeting Details Not Available.\" />\n  );\n\nexport default MeetingDetails;\n","import React, { ReactNode, useState } from \"react\";\n\nexport const SelectedSectionContext = React.createContext({});\n\nexport const SelectedSectionProvider = ({\n  children\n}: {\n  children: ReactNode;\n}) => {\n  const [selectedSection, setSelectedSection] = useState(null);\n\n  return (\n    <SelectedSectionContext.Provider\n      value={{ selectedSection, setSelectedSection }}\n    >\n      {children}\n    </SelectedSectionContext.Provider>\n  );\n};\n","export const URLS = {\n  qa: \"https://webservices-proxy.cis-qas.brown.edu\",\n  prod: \"https://webservices-proxy.brown.edu\"\n};\n","import gql from \"graphql-tag\";\n\nconst termsQuery = gql`\n  {\n    terms {\n      code\n      description\n    }\n  }\n`;\n\nexport default termsQuery;\n","const makeMeeting = (subset = {}) => {\n  return {\n    buildingCode: \"CIT\",\n    buildingDescription: \"Center for Information Technology\",\n    daysToMeet: \"MWF\",\n    endDate: \"2019-05-07\",\n    endTime: \"10:50\",\n    roomCode: \"368\",\n    startDate: \"2019-01-23\",\n    startTime: \"10:00\",\n    ...subset\n  };\n};\n\nexport default makeMeeting;\n","import makeMeeting from \"./makeMeeting\";\n\nconst makeMeetings = (subset = {}, numMeetings = 1) => {\n  const meetings = [];\n  for (let i = 0; i < numMeetings; i += 1) {\n    meetings.push(makeMeeting(subset));\n  }\n\n  return meetings;\n};\n\nexport default makeMeetings;\n","/* eslint-disable import/no-extraneous-dependencies */\nimport React, { ReactElement, ReactNode } from \"react\";\nimport { MemoryRouter, Route, RouteComponentProps } from \"react-router-dom\";\nimport { render } from \"@testing-library/react\";\nimport { SelectedSectionProvider } from \"../../src/contexts/SelectedSectionContext\";\n\nconst renderWithRouter = (ui: ReactElement, { route = \"/\" } = {}) => {\n  let testHistory: RouteComponentProps[\"history\"] = {\n    location: { pathname: \"\", search: \"\", state: \"\", hash: \"\" },\n    length: 0,\n    push: jest.fn(),\n    action: \"PUSH\",\n    replace: jest.fn(),\n    go: jest.fn(),\n    goBack: jest.fn(),\n    goForward: jest.fn(),\n    block: jest.fn(),\n    listen: jest.fn(),\n    createHref: jest.fn()\n  };\n\n  const Wrapper = ({ children }: { children?: ReactNode }) => (\n    <MemoryRouter initialEntries={[route]}>\n      <Route\n        path=\"*\"\n        render={({ history }) => {\n          testHistory = history;\n          return null;\n        }}\n      />\n      <SelectedSectionProvider>{children}</SelectedSectionProvider>\n    </MemoryRouter>\n  );\n\n  return {\n    ...render(ui, { wrapper: Wrapper }),\n    history: testHistory\n  };\n};\n\nexport default renderWithRouter;\n"],"names":["Loader","styled","BrownLoader","colors","white","Wrapper","div","CourseField","label","href","value","defaultValue","React","className","target","rel","Filter","data","useState","isExpanded","setIsExpanded","renderFilter","code","key","NavLink","exact","to","activeStyle","color","itemType","type","onClick","ChevronDownSVG","Object","entries","map","description","FilterWrapper","children","process","env","NODE_ENV","ReactDOM","createPortal","document","getElementsByClassName","formatDate","date","moment","format","formatMeeting","meeting","buildingDescription","roomCode","startTime","endTime","daysToMeet","startDate","endDate","weekdays","U","M","T","W","R","F","S","location","times","days","split","day","join","dates","MeetingDetails","meetings","length","m","i","undefined","SelectedSectionContext","createContext","SelectedSectionProvider","selectedSection","setSelectedSection","Provider","URLS","qa","prod","termsQuery","gql","makeMeeting","subset","buildingCode","makeMeetings","numMeetings","push","renderWithRouter","ui","route","testHistory","pathname","search","state","hash","jest","fn","action","replace","go","goBack","goForward","block","listen","createHref","MemoryRouter","initialEntries","Route","path","render","history","wrapper"],"mappings":"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"}