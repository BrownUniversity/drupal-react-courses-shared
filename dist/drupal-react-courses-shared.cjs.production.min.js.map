{"version":3,"file":"drupal-react-courses-shared.cjs.production.min.js","sources":["../src/components/Loader.tsx","../src/components/Wrapper.tsx","../src/components/CourseField.tsx","../src/components/MeetingDetails.tsx","../src/contexts/SelectedSectionContext.tsx","../src/queries.ts","../src/test_utils/makeMeeting.ts","../src/components/Filter.tsx","../src/components/FilterWrapper.tsx","../src/constants.ts","../src/test_utils/makeMeetings.ts","../src/test_utils/renderWithRouter.tsx"],"sourcesContent":["import styled from \"styled-components\";\nimport { Loader as BrownLoader } from \"brown-university-components\";\nimport { colors } from \"brown-university-styles\";\n\nconst Loader = styled(BrownLoader)`\n  text-align: center;\n\n  #cover {\n    stroke: ${colors.white};\n  }\n`;\n\nexport default Loader;\n","import styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  animation: 750ms ease fadeInUp;\n\n  @keyframes fadeInUp {\n    0% {\n      opacity: 0;\n      transform: translateY(0.75rem);\n    }\n    100% {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n`;\n\nexport default Wrapper;\n","import React from \"react\";\n\ntype CourseFieldProps = {\n  label?: string;\n  href?: string;\n  value?: string;\n  defaultValue?: string;\n};\n\nconst CourseField = ({\n  label,\n  href,\n  value,\n  defaultValue = \"\"\n}: CourseFieldProps) => (\n  <div className=\"course_item_row\">\n    {label && <span className=\"course_item_row_label\">{label}: </span>}\n    <span className=\"course_item_row_content\">\n      {href && value ? (\n        <a\n          href={href}\n          className=\"course_item_row_content\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {value}\n        </a>\n      ) : (\n        value || defaultValue\n      )}\n    </span>\n  </div>\n);\n\nexport default CourseField;\n","import React from \"react\";\nimport moment from \"moment\";\nimport CourseField from \"./CourseField\";\n\nconst formatDate = (date: string) =>\n  moment(date, \"YYYY-MM-DD\").format(\"MMM D, YYYY\");\n\ntype Meeting = {\n  buildingDescription?: string;\n  roomCode?: string;\n  startTime?: string;\n  endTime?: string;\n  daysToMeet?: string;\n  startDate?: string;\n  endDate?: string;\n};\n\nconst formatMeeting = (meeting: Meeting) => {\n  const {\n    buildingDescription,\n    roomCode,\n    startTime,\n    endTime,\n    daysToMeet,\n    startDate,\n    endDate\n  } = meeting;\n\n  const weekdays: Record<string, string> = {\n    U: \"Sun\",\n    M: \"Mon\",\n    T: \"Tue\",\n    W: \"Wed\",\n    R: \"Thu\",\n    F: \"Fri\",\n    S: \"Sat\"\n  };\n\n  const location = `${buildingDescription || \"\"} ${roomCode || \"\"}`;\n  const times = startTime && endTime ? `${startTime} - ${endTime}` : \"\";\n\n  const days = daysToMeet\n    ? daysToMeet\n        .split(\"\")\n        .map(day => weekdays[day])\n        .join(\", \")\n    : \"\";\n\n  const dates =\n    startDate && endDate\n      ? `from ${formatDate(startDate)} to ${formatDate(endDate)}`\n      : \"\";\n\n  return `${location} ${times} ${days} - ${dates}`;\n};\n\nconst MeetingDetails = ({ meetings }: { meetings: Meeting[] }) =>\n  meetings.length > 0 ? (\n    <>\n      {meetings.map((m, i) => (\n        <CourseField\n          label={i === 0 ? \"Meetings\" : undefined}\n          key={`${m.startDate}-${m.daysToMeet}-${m.startTime}`}\n          value={formatMeeting(m)}\n        />\n      ))}\n    </>\n  ) : (\n    <CourseField label=\"Meetings\" value=\"Meeting Details Not Available.\" />\n  );\n\nexport default MeetingDetails;\n","import React, { ReactNode, useState } from \"react\";\n\nexport const SelectedSectionContext = React.createContext({});\n\nexport const SelectedSectionProvider = ({\n  children\n}: {\n  children: ReactNode;\n}) => {\n  const [selectedSection, setSelectedSection] = useState(null);\n\n  return (\n    <SelectedSectionContext.Provider\n      value={{ selectedSection, setSelectedSection }}\n    >\n      {children}\n    </SelectedSectionContext.Provider>\n  );\n};\n","import gql from \"graphql-tag\";\n\nconst termsQuery = gql`\n  {\n    terms {\n      code\n      description\n    }\n  }\n`;\n\nexport default termsQuery;\n","const makeMeeting = (subset = {}) => {\n  return {\n    buildingCode: \"CIT\",\n    buildingDescription: \"Center for Information Technology\",\n    daysToMeet: \"MWF\",\n    endDate: \"2019-05-07\",\n    endTime: \"10:50\",\n    roomCode: \"368\",\n    startDate: \"2019-01-23\",\n    startTime: \"10:00\",\n    ...subset\n  };\n};\n\nexport default makeMeeting;\n","import React, { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { ChevronDownSVG } from \"brown-university-components\";\n\nconst Filter = ({ data }: { data: Record<string, string> }) => {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const renderFilter = (label: string, code: string) => (\n    <li className=\"sub_nav_item\" key={label}>\n      <NavLink\n        exact\n        to={`/${code}`}\n        className=\"sub_nav_link sub_nav_link_label\"\n        data-testid={`${code}-filter`}\n        activeStyle={{ color: \"#C00404\" }}\n      >\n        {label}\n      </NavLink>\n    </li>\n  );\n\n  return (\n    <nav\n      className=\"sub_nav\"\n      aria-label=\"Courses\"\n      itemType=\"http://schema.org/SiteNavigationElement\"\n    >\n      <div className=\"sub_nav_header\">\n        <h2 className=\"sub_nav_title\">Courses</h2>\n        <button\n          className={`sub_nav_handle ${isExpanded ? \"fs-swap-active\" : \"\"}`}\n          type=\"button\"\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          <span className=\"sub_nav_handle_icon\">\n            <svg className=\"icon icon_chevron_down\">\n              <ChevronDownSVG />\n            </svg>\n          </span>\n          <span className=\"sub_nav_handle_label\">\n            {isExpanded ? \"Close\" : \"In This Section\"}\n          </span>\n        </button>\n      </div>\n      <ul\n        className={`sub_nav_list ${isExpanded ? \"fs-swap-active\" : \"\"}`}\n        aria-label=\"Courses\"\n        aria-hidden=\"false\"\n      >\n        {renderFilter(\"All Courses\", \"\")}\n        {Object.entries(data).map(([code, description]) =>\n          renderFilter(description, code)\n        )}\n      </ul>\n    </nav>\n  );\n};\n\nexport default Filter;\n","import ReactDOM from \"react-dom\";\nimport { ReactNode } from \"react\";\n\nconst FilterWrapper = ({ children }: { children: ReactNode }) =>\n  process.env.NODE_ENV !== \"production\"\n    ? children\n    : ReactDOM.createPortal(\n        children,\n        document.getElementsByClassName(\"page_sub_nav\")[0]\n      );\n\nexport default FilterWrapper;\n","export const URLS = {\n  qa: \"https://webservices-proxy.cis-qas.brown.edu\",\n  prod: \"https://webservices-proxy.brown.edu\"\n};\n","import makeMeeting from \"./makeMeeting\";\n\nconst makeMeetings = (subset = {}, numMeetings = 1) => {\n  const meetings = [];\n  for (let i = 0; i < numMeetings; i += 1) {\n    meetings.push(makeMeeting(subset));\n  }\n\n  return meetings;\n};\n\nexport default makeMeetings;\n","/* eslint-disable import/no-extraneous-dependencies */\nimport React, { ReactElement, ReactNode } from \"react\";\nimport { MemoryRouter, Route, RouteComponentProps } from \"react-router-dom\";\nimport { render } from \"@testing-library/react\";\nimport { SelectedSectionProvider } from \"../../src/contexts/SelectedSectionContext\";\n\nconst renderWithRouter = (ui: ReactElement, { route = \"/\" } = {}) => {\n  let testHistory: RouteComponentProps[\"history\"] = {\n    location: { pathname: \"\", search: \"\", state: \"\", hash: \"\" },\n    length: 0,\n    push: jest.fn(),\n    action: \"PUSH\",\n    replace: jest.fn(),\n    go: jest.fn(),\n    goBack: jest.fn(),\n    goForward: jest.fn(),\n    block: jest.fn(),\n    listen: jest.fn(),\n    createHref: jest.fn()\n  };\n\n  const Wrapper = ({ children }: { children?: ReactNode }) => (\n    <MemoryRouter initialEntries={[route]}>\n      <Route\n        path=\"*\"\n        render={({ history }) => {\n          testHistory = history;\n          return null;\n        }}\n      />\n      <SelectedSectionProvider>{children}</SelectedSectionProvider>\n    </MemoryRouter>\n  );\n\n  return {\n    ...render(ui, { wrapper: Wrapper }),\n    history: testHistory\n  };\n};\n\nexport default renderWithRouter;\n"],"names":["Loader","styled","BrownLoader","colors","white","Wrapper","div","CourseField","label","href","value","defaultValue","React","className","target","rel","formatDate","date","moment","format","SelectedSectionContext","createContext","SelectedSectionProvider","children","useState","Provider","selectedSection","setSelectedSection","termsQuery","gql","makeMeeting","subset","buildingCode","buildingDescription","daysToMeet","endDate","endTime","roomCode","startDate","startTime","data","isExpanded","setIsExpanded","renderFilter","code","key","NavLink","exact","to","activeStyle","color","itemType","type","onClick","ChevronDownSVG","Object","entries","map","ReactDOM","createPortal","document","getElementsByClassName","meetings","length","m","i","undefined","meeting","weekdays","U","M","T","W","R","F","S","split","day","join","qa","prod","numMeetings","push","ui","route","testHistory","location","pathname","search","state","hash","jest","fn","action","replace","go","goBack","goForward","block","listen","createHref","render","wrapper","MemoryRouter","initialEntries","Route","path","history"],"mappings":"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"}